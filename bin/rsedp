#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

usage() {
  cat <<'H'
rsedp â€” simple command runner

Usage:
  ./bin/rsedp <command>

Commands:
  aws         Login to AWS (SSO)

Examples:
  ./bin/rsedp aws
  AWS_PROFILE=dev AWS_DEFAULT_REGION=eu-west-3 ./bin/rsedp aws
H
}

cmd="${1:-}"
shift || true

case "${cmd}" in
  ""|-h|--help) usage; exit 0 ;;
  aws) exec "${ROOT_DIR}/scripts/aws.sh" "$@" ;;
  bootstrap) exec "${ROOT_DIR}/scripts/bootstrap.sh" "$@" ;;
  env) exec "${ROOT_DIR}/scripts/env.sh" "$@" ;;
  metrics) exec "${ROOT_DIR}/scripts/metrics.sh" "$@" ;;
  demo-storage) exec "${ROOT_DIR}/scripts/demo-storage.sh" "$@" ;;
  alb) exec "${ROOT_DIR}/scripts/alb.sh" "$@" ;;
  demo-alb) exec "${ROOT_DIR}/scripts/demo-alb.sh" "$@" ;;
  autoscaler) exec "${ROOT_DIR}/scripts/autoscaler.sh" "$@" ;;
  demo-autoscaling) exec "${ROOT_DIR}/scripts/demo-autoscaling.sh" "$@" ;;
  sqs) exec "${ROOT_DIR}/scripts/sqs.sh" "$@" ;;
  pump-sqs) exec "${ROOT_DIR}/scripts/pump-sqs.sh" "$@" ;;
  *) usage; echo "ERROR: Unknown command: ${cmd}"; exit 1 ;;
esac
